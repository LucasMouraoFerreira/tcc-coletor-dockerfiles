#!/usr/bin/env node

var dockerfilelint = require('../lib/index');

var Reporter = require('../lib/reporter/json_reporter');

module.exports.lintDockerfile = (fileContent) => {
  var reporter = new Reporter();

  const fileName = 'Dockerfile';
  const configFilePath = '/home/lucas/tcc/coleta-arquivos';

  reporter.addFile(fileName, fileContent, dockerfilelint.run(configFilePath, fileContent));

  return report(reporter);
};

function report (reporter) {
  var report = reporter.buildReport();
  const obj = { 
    issues: report.files[0].issues,
    issues_count: report.files[0].issues_count
  };
  return obj;
}
